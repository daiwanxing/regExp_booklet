### 关于正则中的括号

我们在写正则的时候或者看到别的正则表达式的时候经常会看到用括号将某段模式包裹起来，似乎有点儿类似于js中的算术运算优先级，其实并非如此。

正则中的括号唯一作用是提供`分组`的功能，比如我们要写一个正则同时满足匹配ab两个字符并能出现多次`/(ab)+/`,就需要用到括号把这段正则包裹起来，能够使得量词`+`作用于`(ab)`这个整体。

如果不用括号的话，`/ab+/`，则量词`+`仅作用于`b`字符至少匹配一次. 

来看下面的示例

```js
const words = "ababa abbbb abbb bab";

words.match(/ab+/g); // ["ab", "ab", "abbbb", "abbb", "ab"]; 

words.match(/(ab)+/g); // ["ab", "ab", "ab", "ab", "ab"]; 
```

### 括号中的分支结构

括号除了可以提供分组功能，还可以对括号内的模式进行组合，通过`|`组合多个模式，只要满足其中一个模式即可完成匹配。

```js
const reg = /I love (javascript|java)/;

reg.test("I love java"); // true

reg.test("I love javascript"); // true
```


### 括号中的分组引用

所谓的分组引用就是对匹配的分组进行数据提取，以匹配年月日为例:

匹配年月日的正则：

```js
const regex = /(\d{4})-(\d{2})-(\d{2})/;
```

如果我们需要将其格式改为月日年，可以通过分组引用改变其位置:

```js
"2021-12-23".replace(regex, "$2/$3/$1"); // 12/23/2021
```
其中的`$1`、`$2`等名称是Reg构造函数的全局属性表示相应的分组, `$1`表示的是提取匹配到的第一个分组，`$2`表示的是提取匹配到的第二个分组...依此类推。

### 反向引用

除了上述的使用`$1`、`$2`这种全局属性引用相应的分组之外，我们还可以在正则表达式内引用分组本身。

例如需要编写一个正则表达式满足匹配下面三个格式的日期：

```md
2021-12-31
2021.12.31
2021/12/31
```

我们很容易的想到`/\d{4}(\.|\/|-)\d{2}(\.|\/|-)\d{2}$/g`用来实现上述需求, 但是这个正则是有缺陷的,

例如即便是2021.12-31 这种不一致的分隔符也能满足匹配，这样是违背常理的，我们需要将第二个分隔符和第一个分隔符保持一致才能完整的实现上述需求.

所以我们可以在正则内部引用第一个分组的，不管第一个分组引用了什么，第二个分组保持一致即可`/\d{4}(\.|\/|-)\d{2}\1\d{2}$/g`.

`/1`表示引用第一个分组，不管第一个分组匹配到了什么，`/1`都匹配第一个分组具体的某个字符。